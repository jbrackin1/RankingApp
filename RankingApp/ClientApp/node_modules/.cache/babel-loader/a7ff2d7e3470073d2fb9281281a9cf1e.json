{"ast":null,"code":"var _jsxFileName = \"/Users/jerodbrackin/Projects/RankingApp/RankingApp/ClientApp/src/components/RankItems.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport RankingGrid from \"./RankingGrid\";\nimport ItemCollection from \"./ItemCollection\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst RankItems = _ref => {\n  _s();\n\n  let {\n    items,\n    setItems,\n    dataType,\n    imgArr,\n    localStorageKey\n  } = _ref;\n  const [reload, setReload] = useState(false);\n\n  function Reload() {\n    setReload(true);\n  }\n\n  function drag(ev) {\n    ev.dataTransfer.setData(\"text\", ev.target.id);\n  }\n\n  function allowDrop(ev) {\n    ev.preventDefault();\n  }\n\n  function drop(ev) {\n    ev.preventDefault();\n    const targetElm = ev.target;\n\n    if (targetElm.nodeName === \"IMG\") {\n      return false;\n    }\n\n    if (targetElm.childNodes.length === 0) {\n      var data = parseInt(ev.dataTransfer.getData(\"text\").substring(5));\n      const transformedCollection = items.map(item => item.id === parseInt(data) ? { ...item,\n        ranking: parseInt(targetElm.id.substring(5))\n      } : { ...item,\n        ranking: item.ranking\n      });\n      setItems(transformedCollection);\n    }\n  }\n\n  useEffect(() => {\n    if (items == null) {\n      getDataFromApi();\n    }\n  }, [dataType]);\n\n  function getDataFromApi() {\n    fetch(`item/${dataType}`).then(results => {\n      return results.json();\n    }).then(data => {\n      setItems(data);\n    });\n  }\n\n  useEffect(() => {\n    if (items != null) {\n      localStorage.setItem(localStorageKey, JSON.stringify(items));\n    }\n\n    setReload(false);\n  }, [items]);\n  useEffect(() => {\n    if (reload === true) {\n      getDataFromApi();\n    }\n  }, [reload]);\n  return items != null ? /*#__PURE__*/_jsxDEV(\"main\", {\n    children: [/*#__PURE__*/_jsxDEV(RankingGrid, {\n      items: items,\n      imgArr: imgArr,\n      drag: drag,\n      allowDrop: allowDrop,\n      drop: drop\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(ItemCollection, {\n      items: items,\n      drag: drag,\n      imgArr: imgArr\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: Reload,\n      className: \"reload\",\n      style: {\n        \"marginTop\": \"10px\"\n      },\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text\",\n        children: \"Reload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 94\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 13\n  }, this) : /*#__PURE__*/_jsxDEV(\"main\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 15\n  }, this);\n};\n\n_s(RankItems, \"RgKVlxOIZdSBL+iSVq2I+RBt7gw=\");\n\n_c = RankItems;\nexport default RankItems;\n\nvar _c;\n\n$RefreshReg$(_c, \"RankItems\");","map":{"version":3,"names":["useEffect","useState","RankingGrid","ItemCollection","RankItems","items","setItems","dataType","imgArr","localStorageKey","reload","setReload","Reload","drag","ev","dataTransfer","setData","target","id","allowDrop","preventDefault","drop","targetElm","nodeName","childNodes","length","data","parseInt","getData","substring","transformedCollection","map","item","ranking","getDataFromApi","fetch","then","results","json","localStorage","setItem","JSON","stringify"],"sources":["/Users/jerodbrackin/Projects/RankingApp/RankingApp/ClientApp/src/components/RankItems.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport RankingGrid from \"./RankingGrid\";\nimport ItemCollection from \"./ItemCollection\";\n\nconst RankItems = ({ items, setItems, dataType, imgArr, localStorageKey }) => {\n\n    const [reload, setReload] = useState(false);\n\n    function Reload() {\n        setReload(true);\n    }\n\n    function drag(ev) {\n        ev.dataTransfer.setData(\"text\", ev.target.id);\n    }\n\n    function allowDrop(ev) {\n        ev.preventDefault();\n    }\n\n    function drop(ev) {\n\n        ev.preventDefault();\n        const targetElm = ev.target;\n        if (targetElm.nodeName === \"IMG\") {\n            return false;\n        }\n        if (targetElm.childNodes.length === 0) {\n            var data = parseInt(ev.dataTransfer.getData(\"text\").substring(5));\n            const transformedCollection = items.map((item) => (item.id === parseInt(data)) ?\n                { ...item, ranking: parseInt(targetElm.id.substring(5)) } : { ...item, ranking: item.ranking });\n            setItems(transformedCollection);\n        }\n\n    }\n    useEffect(() => {\n        if (items == null) {\n            getDataFromApi();\n        }\n\n    }, [dataType]);\n\n    function getDataFromApi() {\n        fetch(`item/${dataType}`)\n            .then((results) => {\n                return results.json();\n            })\n            .then(data => {\n\n                setItems(data);\n            })\n    }\n\n    useEffect(() => {\n        if (items != null) {\n            localStorage.setItem(localStorageKey, JSON.stringify(items));\n        }\n        setReload(false);\n    }, [items])\n\n    useEffect(() => {\n        if (reload === true) {\n            getDataFromApi();\n        }\n    }, [reload])\n\n\n    return (\n        (items != null) ?\n            <main>\n                <RankingGrid items={items} imgArr={imgArr} drag={drag} allowDrop={allowDrop} drop={drop} />\n                <ItemCollection items={items} drag={drag} imgArr={imgArr} />\n                <button onClick={Reload} className=\"reload\" style={{ \"marginTop\": \"10px\" }}> <span className=\"text\" >Reload</span > </button>\n            </main>\n            : <main>Loading...</main>\n    )\n}\nexport default RankItems;"],"mappings":"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"},"metadata":{},"sourceType":"module"}